generator client { provider = "prisma-client-js" }
datasource db { provider = "sqlite"; url = env("DATABASE_URL") }

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  accounts  Account[]
}

model Account {
  id         String   @id @default(cuid())
  provider   String
  providerId String
  access     String   // encrypted
  refresh    String?  // encrypted
  expiresAt  DateTime?
  userId     String
  user       User     @relation(fields: [userId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([provider, providerId])
}

model MetricSnapshot {
  id        String   @id @default(cuid())
  userId    String
  channel   String
  label     String
  value     Float
  takenAt   DateTime @default(now())
}
